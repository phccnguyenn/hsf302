<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{fragments/header :: header}"></head>

<body class="admin-body">

<!-- Admin Navigation -->
<div th:replace="~{admin/fragments/admin-navbar :: admin-navbar}"></div>

<div class="admin-container">
    <!-- Admin Sidebar -->
            <!-- Include Sidebar -->
        <div th:replace="admin/fragments/admin-sidebar :: sidebar"></div>

    <!-- Main Content -->
    <main class="admin-main-content">
        <div class="admin-header">
            <h1>B√°o c√°o & Th·ªëng k√™</h1>
            <div class="header-actions">
                <select class="form-select period-selector">
                    <option value="today">H√¥m nay</option>
                    <option value="week">Tu·∫ßn n√†y</option>
                    <option value="month" selected>Th√°ng n√†y</option>
                    <option value="year">NƒÉm n√†y</option>
                </select>
                <button class="btn btn-primary" onclick="generateReport()">
                    üìä T·∫°o b√°o c√°o
                </button>
            </div>
        </div>

        <!-- Key Metrics -->
        <div class="metrics-grid">
            <div class="metric-card revenue">
                <div class="metric-header">
                    <h3>T·ªïng doanh thu</h3>
                    <span class="metric-period">Th√°ng n√†y</span>
                </div>
                <div class="metric-value">456,800,000 VND</div>
                <div class="metric-change positive">
                    <span class="change-icon">‚Üó</span>
                    +15.2% so v·ªõi th√°ng tr∆∞·ªõc
                </div>
            </div>

            <div class="metric-card tickets">
                <div class="metric-header">
                    <h3>V√© b√°n ra</h3>
                    <span class="metric-period">Th√°ng n√†y</span>
                </div>
                <div class="metric-value">12,450</div>
                <div class="metric-change positive">
                    <span class="change-icon">‚Üó</span>
                    +8.7% so v·ªõi th√°ng tr∆∞·ªõc
                </div>
            </div>

            <div class="metric-card occupancy">
                <div class="metric-header">
                    <h3>T·ª∑ l·ªá l·∫•p ƒë·∫ßy</h3>
                    <span class="metric-period">Trung b√¨nh</span>
                </div>
                <div class="metric-value">78.5%</div>
                <div class="metric-change neutral">
                    <span class="change-icon">‚Üí</span>
                    Kh√¥ng ƒë·ªïi
                </div>
            </div>

            <div class="metric-card customers">
                <div class="metric-header">
                    <h3>Kh√°ch h√†ng m·ªõi</h3>
                    <span class="metric-period">Th√°ng n√†y</span>
                </div>
                <div class="metric-value">2,340</div>
                <div class="metric-change positive">
                    <span class="change-icon">‚Üó</span>
                    +22.1% so v·ªõi th√°ng tr∆∞·ªõc
                </div>
            </div>
        </div>

        <!-- Charts Section -->
        <div class="reports-grid">
            <!-- Revenue Chart -->
            <div class="report-card large">
                <div class="report-header">
                    <h3>Bi·ªÉu ƒë·ªì doanh thu</h3>
                    <div class="chart-controls">
                        <button class="chart-btn active" onclick="showRevenueChart('daily')">Theo ng√†y</button>
                        <button class="chart-btn" onclick="showRevenueChart('weekly')">Theo tu·∫ßn</button>
                        <button class="chart-btn" onclick="showRevenueChart('monthly')">Theo th√°ng</button>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="revenueChart" width="800" height="400"></canvas>
                </div>
            </div>

            <!-- Cinema Performance -->
            <div class="report-card">
                <div class="report-header">
                    <h3>Hi·ªáu su·∫•t theo r·∫°p</h3>
                    <a href="/admin/reports/cinemas" class="view-all">Xem chi ti·∫øt</a>
                </div>
                <div class="cinema-performance">
                    <div th:each="cinema : ${cinemaRevenue}" class="cinema-item">
                        <div class="cinema-info">
                            <h4 th:text="${cinema.name}">CGV Vincom Center</h4>
                            <p th:text="${cinema.screens} + ' ph√≤ng chi·∫øu'">8 ph√≤ng chi·∫øu</p>
                        </div>
                        <div class="cinema-stats">
                            <div class="stat">
                                <span class="stat-value" th:text="${#numbers.formatDecimal(cinema.todayRevenue, 0, 'COMMA', 0, 'POINT')}">4,250,000</span>
                                <span class="stat-label">VND</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress" style="width: 85%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Top Movies -->
            <div class="report-card">
                <div class="report-header">
                    <h3>Phim b√°n ch·∫°y nh·∫•t</h3>
                    <a href="/admin/reports/movies" class="view-all">Xem chi ti·∫øt</a>
                </div>
                <div class="top-movies">
                    <div th:each="movie, stat : ${movieRevenue}" class="movie-item">
                        <div class="movie-rank" th:text="${stat.count}">1</div>
                        <img th:src="${movie.poster}" th:alt="${movie.title}" class="movie-poster">
                        <div class="movie-details">
                            <h4 th:text="${movie.title}">Spider-Man: No Way Home</h4>
                            <div class="movie-stats">
                                <span th:text="${movie.ticketsSold} + ' v√©'">1,250 v√©</span>
                                <span th:text="${#numbers.formatDecimal(movie.revenue, 0, 'COMMA', 0, 'POINT')} + ' VND'">3,750,000 VND</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Occupancy Heatmap -->
            <div class="report-card">
                <div class="report-header">
                    <h3>B·∫£n ƒë·ªì nhi·ªát theo gi·ªù</h3>
                    <div class="heatmap-legend">
                        <span class="legend-item low">Th·∫•p</span>
                        <span class="legend-item medium">Trung b√¨nh</span>
                        <span class="legend-item high">Cao</span>
                    </div>
                </div>
                <div class="heatmap-container">
                    <div class="heatmap-grid">
                        <!-- Time slots -->
                        <div class="time-labels">
                            <div class="time-slot">9:00</div>
                            <div class="time-slot">12:00</div>
                            <div class="time-slot">15:00</div>
                            <div class="time-slot">18:00</div>
                            <div class="time-slot">21:00</div>
                        </div>
                        <!-- Days -->
                        <div class="heatmap-days">
                            <div class="day-row">
                                <span class="day-label">T2</span>
                                <div class="heat-cell low"></div>
                                <div class="heat-cell medium"></div>
                                <div class="heat-cell medium"></div>
                                <div class="heat-cell high"></div>
                                <div class="heat-cell high"></div>
                            </div>
                            <div class="day-row">
                                <span class="day-label">T3</span>
                                <div class="heat-cell low"></div>
                                <div class="heat-cell medium"></div>
                                <div class="heat-cell medium"></div>
                                <div class="heat-cell high"></div>
                                <div class="heat-cell high"></div>
                            </div>
                            <div class="day-row">
                                <span class="day-label">T4</span>
                                <div class="heat-cell low"></div>
                                <div class="heat-cell low"></div>
                                <div class="heat-cell medium"></div>
                                <div class="heat-cell high"></div>
                                <div class="heat-cell high"></div>
                            </div>
                            <div class="day-row">
                                <span class="day-label">T5</span>
                                <div class="heat-cell medium"></div>
                                <div class="heat-cell medium"></div>
                                <div class="heat-cell high"></div>
                                <div class="heat-cell high"></div>
                                <div class="heat-cell high"></div>
                            </div>
                            <div class="day-row">
                                <span class="day-label">T6</span>
                                <div class="heat-cell medium"></div>
                                <div class="heat-cell high"></div>
                                <div class="heat-cell high"></div>
                                <div class="heat-cell high"></div>
                                <div class="heat-cell high"></div>
                            </div>
                            <div class="day-row">
                                <span class="day-label">T7</span>
                                <div class="heat-cell high"></div>
                                <div class="heat-cell high"></div>
                                <div class="heat-cell high"></div>
                                <div class="heat-cell high"></div>
                                <div class="heat-cell high"></div>
                            </div>
                            <div class="day-row">
                                <span class="day-label">CN</span>
                                <div class="heat-cell high"></div>
                                <div class="heat-cell high"></div>
                                <div class="heat-cell high"></div>
                                <div class="heat-cell high"></div>
                                <div class="heat-cell medium"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Customer Demographics -->
            <div class="report-card">
                <div class="report-header">
                    <h3>Ph√¢n t√≠ch kh√°ch h√†ng</h3>
                </div>
                <div class="demographics-container">
                    <div class="demo-chart">
                        <canvas id="ageChart" width="300" height="200"></canvas>
                    </div>
                    <div class="demo-stats">
                        <div class="demo-item">
                            <span class="demo-label">18-25 tu·ªïi</span>
                            <span class="demo-percentage">35%</span>
                        </div>
                        <div class="demo-item">
                            <span class="demo-label">26-35 tu·ªïi</span>
                            <span class="demo-percentage">42%</span>
                        </div>
                        <div class="demo-item">
                            <span class="demo-label">36-45 tu·ªïi</span>
                            <span class="demo-percentage">18%</span>
                        </div>
                        <div class="demo-item">
                            <span class="demo-label">45+ tu·ªïi</span>
                            <span class="demo-percentage">5%</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Financial Summary -->
            <div class="report-card">
                <div class="report-header">
                    <h3>T√≥m t·∫Øt t√†i ch√≠nh</h3>
                    <select class="form-select mini">
                        <option>Th√°ng n√†y</option>
                        <option>Th√°ng tr∆∞·ªõc</option>
                        <option>Qu√Ω n√†y</option>
                    </select>
                </div>
                <div class="financial-summary">
                    <div class="financial-item">
                        <span class="financial-label">Doanh thu v√©</span>
                        <span class="financial-value">380,200,000 VND</span>
                        <span class="financial-percent">83.2%</span>
                    </div>
                    <div class="financial-item">
                        <span class="financial-label">Doanh thu F&B</span>
                        <span class="financial-value">76,600,000 VND</span>
                        <span class="financial-percent">16.8%</span>
                    </div>
                    <div class="financial-separator"></div>
                    <div class="financial-item total">
                        <span class="financial-label">T·ªïng doanh thu</span>
                        <span class="financial-value">456,800,000 VND</span>
                        <span class="financial-percent">100%</span>
                    </div>
                    <div class="financial-item">
                        <span class="financial-label">Chi ph√≠ v·∫≠n h√†nh</span>
                        <span class="financial-value">-234,500,000 VND</span>
                    </div>
                    <div class="financial-item profit">
                        <span class="financial-label">L·ª£i nhu·∫≠n r√≤ng</span>
                        <span class="financial-value">222,300,000 VND</span>
                        <span class="financial-percent">48.7%</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Export Section -->
        <div class="export-section">
            <div class="export-card">
                <h3>Xu·∫•t b√°o c√°o</h3>
                <p>T·∫£i xu·ªëng b√°o c√°o chi ti·∫øt v·ªõi nhi·ªÅu ƒë·ªãnh d·∫°ng kh√°c nhau</p>
                <div class="export-buttons">
                    <button class="btn btn-outline" onclick="exportReport('pdf')">
                        üìÑ PDF
                    </button>
                    <button class="btn btn-outline" onclick="exportReport('excel')">
                        üìä Excel
                    </button>
                    <button class="btn btn-outline" onclick="exportReport('csv')">
                        üìã CSV
                    </button>
                </div>
            </div>
        </div>
    </main>
</div>

<style>
.period-selector {
    background: #333;
    color: #FFFFFF;
    border: 1px solid #555;
    border-radius: 6px;
    padding: 0.5rem 1rem;
    font-size: 0.9rem;
}

.metrics-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1.5rem;
    margin-bottom: 2rem;
}

.metric-card {
    background: #1F1F1F;
    border-radius: 12px;
    padding: 1.5rem;
    border: 1px solid #333;
    position: relative;
    overflow: hidden;
}

.metric-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 4px;
    background: linear-gradient(90deg, #E50914, #ff4757);
}

.metric-card.tickets::before {
    background: linear-gradient(90deg, #28a745, #20c997);
}

.metric-card.occupancy::before {
    background: linear-gradient(90deg, #ffc107, #fd7e14);
}

.metric-card.customers::before {
    background: linear-gradient(90deg, #6f42c1, #e83e8c);
}

.metric-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
}

.metric-header h3 {
    color: #B3B3B3;
    font-size: 0.95rem;
    font-weight: 500;
    margin: 0;
}

.metric-period {
    font-size: 0.8rem;
    color: #666;
    background: #333;
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
}

.metric-value {
    font-size: 2.2rem;
    font-weight: 700;
    color: #FFFFFF;
    margin-bottom: 0.75rem;
}

.metric-change {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.85rem;
    font-weight: 500;
}

.metric-change.positive {
    color: #28a745;
}

.metric-change.negative {
    color: #dc3545;
}

.metric-change.neutral {
    color: #6c757d;
}

.change-icon {
    font-size: 1rem;
}

.reports-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
    gap: 1.5rem;
    margin-bottom: 2rem;
}

.report-card {
    background: #1F1F1F;
    border-radius: 12px;
    border: 1px solid #333;
    overflow: hidden;
}

.report-card.large {
    grid-column: 1 / -1;
}

.report-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1.5rem;
    border-bottom: 1px solid #333;
}

.report-header h3 {
    color: #FFFFFF;
    font-size: 1.1rem;
    margin: 0;
    font-weight: 600;
}

.view-all {
    color: #E50914;
    text-decoration: none;
    font-size: 0.9rem;
    font-weight: 500;
}

.view-all:hover {
    text-decoration: underline;
}

.chart-controls {
    display: flex;
    gap: 0.5rem;
}

.chart-btn {
    background: #333;
    color: #B3B3B3;
    border: 1px solid #555;
    border-radius: 6px;
    padding: 0.5rem 1rem;
    font-size: 0.85rem;
    cursor: pointer;
    transition: all 0.2s ease;
}

.chart-btn.active,
.chart-btn:hover {
    background: #E50914;
    color: white;
    border-color: #E50914;
}

.chart-container {
    padding: 1.5rem;
    height: 400px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.cinema-performance {
    padding: 1.5rem;
}

.cinema-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 0;
    border-bottom: 1px solid #333;
}

.cinema-item:last-child {
    border-bottom: none;
}

.cinema-info h4 {
    color: #FFFFFF;
    margin: 0 0 0.25rem 0;
    font-size: 1rem;
}

.cinema-info p {
    color: #B3B3B3;
    margin: 0;
    font-size: 0.85rem;
}

.cinema-stats {
    text-align: right;
    min-width: 120px;
}

.stat {
    margin-bottom: 0.5rem;
}

.stat-value {
    color: #FFFFFF;
    font-weight: 600;
}

.stat-label {
    color: #B3B3B3;
    font-size: 0.8rem;
    margin-left: 0.25rem;
}

.progress-bar {
    background: #333;
    height: 4px;
    border-radius: 2px;
    overflow: hidden;
}

.progress {
    background: linear-gradient(90deg, #E50914, #ff4757);
    height: 100%;
    transition: width 0.3s ease;
}

.top-movies {
    padding: 1.5rem;
}

.movie-item {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1rem 0;
    border-bottom: 1px solid #333;
}

.movie-item:last-child {
    border-bottom: none;
}

.movie-rank {
    background: #E50914;
    color: white;
    width: 2rem;
    height: 2rem;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    font-size: 0.9rem;
}

.movie-poster {
    width: 50px;
    height: 75px;
    border-radius: 6px;
    object-fit: cover;
}

.movie-details {
    flex: 1;
}

.movie-details h4 {
    color: #FFFFFF;
    margin: 0 0 0.25rem 0;
    font-size: 0.95rem;
}

.movie-stats {
    display: flex;
    gap: 1rem;
    font-size: 0.85rem;
}

.movie-stats span:first-child {
    color: #B3B3B3;
}

.movie-stats span:last-child {
    color: #E50914;
    font-weight: 600;
}

.heatmap-container {
    padding: 1.5rem;
}

.heatmap-legend {
    display: flex;
    gap: 1rem;
    font-size: 0.8rem;
}

.legend-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.legend-item::before {
    content: '';
    width: 12px;
    height: 12px;
    border-radius: 2px;
}

.legend-item.low::before {
    background: #28a745;
}

.legend-item.medium::before {
    background: #ffc107;
}

.legend-item.high::before {
    background: #dc3545;
}

.heatmap-grid {
    margin-top: 1rem;
}

.time-labels {
    display: grid;
    grid-template-columns: 60px repeat(5, 1fr);
    gap: 4px;
    margin-bottom: 4px;
}

.time-slot {
    text-align: center;
    font-size: 0.8rem;
    color: #B3B3B3;
    padding: 0.5rem;
}

.heatmap-days {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.day-row {
    display: grid;
    grid-template-columns: 60px repeat(5, 1fr);
    gap: 4px;
    align-items: center;
}

.day-label {
    font-size: 0.8rem;
    color: #B3B3B3;
    text-align: center;
    font-weight: 500;
}

.heat-cell {
    height: 25px;
    border-radius: 3px;
    cursor: pointer;
    transition: all 0.2s ease;
}

.heat-cell.low {
    background: rgba(40, 167, 69, 0.7);
}

.heat-cell.medium {
    background: rgba(255, 193, 7, 0.7);
}

.heat-cell.high {
    background: rgba(220, 53, 69, 0.7);
}

.heat-cell:hover {
    transform: scale(1.1);
    opacity: 0.8;
}

.demographics-container {
    padding: 1.5rem;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;
    align-items: center;
}

.demo-stats {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.demo-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.demo-label {
    color: #B3B3B3;
    font-size: 0.9rem;
}

.demo-percentage {
    color: #FFFFFF;
    font-weight: 600;
}

.financial-summary {
    padding: 1.5rem;
}

.financial-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.75rem 0;
}

.financial-label {
    color: #B3B3B3;
    font-size: 0.9rem;
}

.financial-value {
    color: #FFFFFF;
    font-weight: 600;
}

.financial-percent {
    color: #666;
    font-size: 0.8rem;
    margin-left: 0.5rem;
}

.financial-separator {
    border-top: 1px solid #333;
    margin: 0.5rem 0;
}

.financial-item.total {
    border-top: 2px solid #E50914;
    border-bottom: 2px solid #E50914;
    margin: 0.5rem 0;
    font-weight: 600;
}

.financial-item.total .financial-value {
    color: #E50914;
    font-size: 1.1rem;
}

.financial-item.profit .financial-value {
    color: #28a745;
}

.form-select.mini {
    background: #333;
    color: #FFFFFF;
    border: 1px solid #555;
    border-radius: 4px;
    padding: 0.25rem 0.5rem;
    font-size: 0.8rem;
}

.export-section {
    margin-top: 2rem;
}

.export-card {
    background: #1F1F1F;
    border-radius: 12px;
    padding: 2rem;
    border: 1px solid #333;
    text-align: center;
}

.export-card h3 {
    color: #FFFFFF;
    margin: 0 0 0.5rem 0;
}

.export-card p {
    color: #B3B3B3;
    margin: 0 0 1.5rem 0;
}

.export-buttons {
    display: flex;
    justify-content: center;
    gap: 1rem;
    flex-wrap: wrap;
}

@media (max-width: 768px) {
    .metrics-grid {
        grid-template-columns: 1fr;
    }
    
    .reports-grid {
        grid-template-columns: 1fr;
    }
    
    .demographics-container {
        grid-template-columns: 1fr;
    }
    
    .chart-controls {
        flex-wrap: wrap;
    }
    
    .time-labels,
    .day-row {
        grid-template-columns: 40px repeat(5, 1fr);
    }
}
</style>

<!-- Chart.js for charts -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
document.addEventListener('DOMContentLoaded', function() {
    initializeCharts();
});

function initializeCharts() {
    // Revenue Chart
    const revenueCtx = document.getElementById('revenueChart').getContext('2d');
    new Chart(revenueCtx, {
        type: 'line',
        data: {
            labels: ['01/11', '02/11', '03/11', '04/11', '05/11', '06/11', '07/11', '08/11', '09/11', '10/11'],
            datasets: [{
                label: 'Doanh thu (VND)',
                data: [12500000, 15200000, 11800000, 16900000, 18500000, 21200000, 24800000, 19600000, 22100000, 25700000],
                borderColor: '#E50914',
                backgroundColor: 'rgba(229, 9, 20, 0.1)',
                borderWidth: 3,
                fill: true,
                tension: 0.4,
                pointBackgroundColor: '#E50914',
                pointBorderColor: '#FFFFFF',
                pointBorderWidth: 2,
                pointRadius: 6,
                pointHoverRadius: 8
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    display: false
                }
            },
            scales: {
                y: {
                    beginAtZero: true,
                    ticks: {
                        callback: function(value) {
                            return new Intl.NumberFormat('vi-VN', {
                                style: 'currency',
                                currency: 'VND',
                                minimumFractionDigits: 0
                            }).format(value);
                        },
                        color: '#B3B3B3',
                        font: {
                            size: 12
                        }
                    },
                    grid: {
                        color: 'rgba(255, 255, 255, 0.1)'
                    }
                },
                x: {
                    ticks: {
                        color: '#B3B3B3',
                        font: {
                            size: 12
                        }
                    },
                    grid: {
                        color: 'rgba(255, 255, 255, 0.1)'
                    }
                }
            },
            elements: {
                point: {
                    hoverBackgroundColor: '#FFFFFF',
                    hoverBorderColor: '#E50914'
                }
            }
        }
    });

    // Age Demographics Chart
    const ageCtx = document.getElementById('ageChart').getContext('2d');
    new Chart(ageCtx, {
        type: 'doughnut',
        data: {
            labels: ['18-25', '26-35', '36-45', '45+'],
            datasets: [{
                data: [35, 42, 18, 5],
                backgroundColor: [
                    '#E50914',
                    '#ff4757',
                    '#ffc107',
                    '#6c757d'
                ],
                borderWidth: 0,
                hoverOffset: 4
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    display: false
                }
            },
            elements: {
                arc: {
                    borderWidth: 0
                }
            }
        }
    });
}

function showRevenueChart(period) {
    // Update chart data based on period
    console.log('Showing revenue chart for:', period);
    
    // Update active button
    document.querySelectorAll('.chart-btn').forEach(btn => btn.classList.remove('active'));
    event.target.classList.add('active');
    
    // In real implementation, you would update the chart with new data
}

function generateReport() {
    console.log('Generating report...');
    // Mock report generation
    alert('B√°o c√°o ƒëang ƒë∆∞·ª£c t·∫°o. B·∫°n s·∫Ω nh·∫≠n ƒë∆∞·ª£c th√¥ng b√°o khi ho√†n th√†nh.');
}

function exportReport(format) {
    console.log('Exporting report as:', format);
    // Mock export functionality
    alert(`ƒêang xu·∫•t b√°o c√°o ƒë·ªãnh d·∫°ng ${format.toUpperCase()}...`);
}

// Period selector change
document.querySelector('.period-selector')?.addEventListener('change', function(e) {
    console.log('Period changed to:', e.target.value);
    // In real implementation, you would update all charts and metrics
});
</script>

</body>
</html>