<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/header :: header}"></head>
<body>
<div th:replace="~{fragments/navbar :: navbar}"></div>

<main class="container">
    <!-- ================================== -->
    <!--      DATE SLIDER SECTION           -->
    <!-- ================================== -->
    <!-- NOTE: A fully functional date slider would require JavaScript. This is a static visual representation. -->
    <div class="date-slider">
        <div class="date-item active">
            <span class="month">10</span>
            <span class="day">28</span>
            <span class="weekday">Tue</span>
        </div>
        <div class="date-item">
            <span class="month">10</span>
            <span class="day">29</span>
            <span class="weekday">Wed</span>
        </div>
        <div class="date-item">
            <span class="month">10</span>
            <span class="day">30</span>
            <span class="weekday">Thu</span>
        </div>
        <!-- ... more dates ... -->
    </div>

    <!-- ================================== -->
    <!--      FILTERS & SHOWTIMES LIST      -->
    <!-- ================================== -->
    <div class="showtimes-container">
        <div class="city-filter">
            <button class="city-btn active">Hà Nội</button>
            <button class="city-btn">TP. Hồ Chí Minh</button>
        </div>

        <!-- This is the main dynamic list -->
        <div class="theaters-list">
            <!--
              THYMELEAF LOOP FOR THE MAP:
              This will loop through each entry in our showtimesByCinema Map.
              'entry.key' will be the Cinema object.
              'entry.value' will be the List of Showtime objects for that cinema.
            -->
            <div class="theater-block" th:each="entry : ${showtimesByCinema}">
                <h2 class="theater-name" th:text="${entry.key.name}">CGV Theater Name</h2>

                <div class="format-group">
                    <h3 class="format-title">Rạp 2D</h3>
                    <div class="showtime-buttons">
                        <!-- Inner loop for the showtimes in the list -->
                        <a th:href="@{/booking/select-seats/{movieId}/{showtimeId}(movieId=${movie.movieId}, showtimeId=${showtime.id})}"
                           class="showtime-btn"
                           th:each="showtime : ${entry.value}">
                            <span class="time" th:text="${showtime.time}">00:00</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

<div th:replace="~{fragments/footer :: footer}"></div>
</body>
</html>